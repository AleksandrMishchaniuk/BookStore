- order_summary = true if order_summary.nil?
%h1 Checkout
#checkout_panel
  - [
  -  'addresses', 'delivery', 'payment', 'confirm', 'complete'
  - ].each_with_index do |step_name, i|
    - defined = (i == 0 && @order.billing_address) ||
    -           (i == 1 && @order.delivery) ||
    -           (i == 2 && @order.credit_card) ||
    -           (i == 3 && @order.billing_address && @order.delivery && @order.credit_card)
    - unless i == 0
      %span.glyphicon.glyphicon-chevron-right
    - if i+1 == step
      %span.step.current.text-primary= step_name.upcase
    - elsif i < 3 && defined
      %span.step.text-success= link_to step_name.upcase, eval("edit_checkout_#{step_name}_path")
    - elsif i == 3 && defined
      %span.step.text-success= link_to step_name.upcase, eval("checkout_#{step_name}_path")
    - else
      %span.step= step_name.upcase
#checkout_data
  - if order_summary
    .row
      .col-sm-8
        = yield :checkout_data
      .col-sm-4
        = render "checkout/order_summary"
  - else
    = yield :checkout_data
