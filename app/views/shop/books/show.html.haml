.caption
  %h2= @book.title
  %h3
    %i= "#{t('activerecord.models.author.one').mb_chars.capitalize}: #{authors_list @book.authors}"
.row
  .col-md-4
    .div_image
      = image_tag(@book.image, class: 'img-thumbnail')
  .col-md-8
    .div_to_cart
      .row
        .col-sm-6
          .price= "$ #{@book.price}"
        .col-sm-6.text-right
          = form_for @cart, url: add_item_cart_path, html: {class: 'form-inline', role: 'form'} do |f|
            = f.hidden_field :book_id, value: @cart.book_id
            .form-group
              = f.number_field(:book_count, value: @cart.book_count, in: 1..20, step: 1, class: 'form-control')
            .form-group
              = f.submit(t('views.shop.add_to_cart'), class: 'btn btn-primary')
          - if @in_cart
            %p.text-success
              %strong= "#{t('views.shop.already_in_cart')}: #{@in_cart.book_count} #{t('views.shop.pcs')}"
    %p.description
      = @book.full_description
.reviews
  %h3= "#{t('activerecord.models.review.other').mb_chars.capitalize}"
  - if !user_signed_in?
    %i
    = t('views.shop.review_msg_without_user')
    %strong= link_to t('navbar.link.sign_in'), new_user_session_path
  - elsif can? :create, Review
    = link_to t('views.shop.add_review_link'), new_shop_book_review_path(@book)
  - else
    %i= t('views.shop.you_cannot_create_review')
  - if @reviews.empty?
    %p.text-center.lead= t('views.shop.no_reviews_text')
  - else
    %hr
    - @reviews.each do |review|
      = render 'partials/review', review: review
      %hr
